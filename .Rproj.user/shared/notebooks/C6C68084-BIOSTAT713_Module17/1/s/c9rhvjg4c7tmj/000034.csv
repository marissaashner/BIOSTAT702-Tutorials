"0","# Fit an intercept-only Weibull AFT model"
"0","weibull_aft <- flexsurvreg(surv_obj_ps ~ 1, data = pharmacoSmoking, dist = ""weibull"")"
"0",""
"0","# Fit an intercept-only Lognormal AFT model "
"0","lognorm_aft <- flexsurvreg(surv_obj_ps ~ 1, data = pharmacoSmoking, dist = ""lnorm"")"
"0",""
"0","# Create the Kaplan-Meier estimates"
"0","km_fit <- survfit(surv_obj_ps ~ 1, data = pharmacoSmoking)"
"0",""
"0","# Extract the survival curve from the Weibull AFT model"
"0","weibull_curve <- data.frame("
"0","  time = seq(from = min(pharmacoSmoking$ttr), to = max(pharmacoSmoking$ttr), by = 0.1),"
"0","  surv = predict(weibull_aft, times = seq(from = min(pharmacoSmoking$ttr), to = max(pharmacoSmoking$ttr), by = 0.1), newdata = pharmacoSmoking[1,], type = ""survival"")[[1]][[1]][,2] %>% unlist()"
"0",")"
"0",""
"0","# Extract the survival curve from the Lnorm AFT model"
"0","lnorm_curve <- data.frame("
"0","  time = seq(from = min(pharmacoSmoking$ttr), to = max(pharmacoSmoking$ttr), by = 0.1),"
"0","  surv = predict(lognorm_aft, times = seq(from = min(pharmacoSmoking$ttr), to = max(pharmacoSmoking$ttr), by = 0.1), newdata = pharmacoSmoking[1,], type = ""survival"")[[1]][[1]][,2] %>% unlist()"
"0",")"
"0",""
"0","ggsurvplot(km_fit, data = pharmacoSmoking, conf.int = TRUE, "
"0","           color = ""red"")$plot + "
"0","  geom_line(data = weibull_curve, "
"0","            aes(x = time, y = surv, col = ""Weibull AFT"")) + "
"0","  geom_line(data = lnorm_curve, "
"0","            aes(x = time, y = surv, col = ""Lognormal AFT"")) + "
"0","  geom_segment(aes(x = 0, xend = 0, y = 1, yend = 1, "
"0","                   color = ""Kaplan-Meier""),"
"0","               show.legend = TRUE, linetype = ""solid"") +  # Add dummy line"
"0","  scale_color_manual(values = c(""Weibull AFT"" = ""blue"","
"0","                                ""Lognormal AFT"" = ""green"","
"0","                                ""Kaplan-Meier"" = ""red"")) + "
"0","  labs(color = """")"
"1","[38;5;232mScale for [32mcolour[38;5;232m is already present.
Adding another scale for [32mcolour[38;5;232m, which will replace the existing
scale.[39m
"
